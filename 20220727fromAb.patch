From faeceeed57120d539679f072a9f29417396efd60 Mon Sep 17 00:00:00 2001
From: Abhishek Akkabathula <a.akkabathul@samsung.com>
Date: Wed, 27 Jul 2022 15:07:51 +0530
Subject: [PATCH] fix menuconfig

---
 .../stm32h745zi-nucleo/hello/defconfig        | 460 ++++++++++++------
 os/arch/arm/src/stm32h745/Kconfig             |  17 +
 os/arch/arm/src/stm32h745/stm32h745_usart.c   |   2 +-
 os/arch/arm/src/stm32h745/stm32h745_wwdg1.c   |   2 +-
 os/board/stm32h745zi-nucleo/Kconfig           |  38 ++
 os/board/stm32h745zi-nucleo/src/stm32_boot.c  |   2 +-
 6 files changed, 362 insertions(+), 159 deletions(-)

diff --git a/build/configs/stm32h745zi-nucleo/hello/defconfig b/build/configs/stm32h745zi-nucleo/hello/defconfig
index f400e20431..214365d599 100644
--- a/build/configs/stm32h745zi-nucleo/hello/defconfig
+++ b/build/configs/stm32h745zi-nucleo/hello/defconfig
@@ -21,7 +21,9 @@ CONFIG_APPS_DIR="../apps"
 CONFIG_FRAMEWORK_DIR="../framework"
 CONFIG_TOOLS_DIR="../tools"
 CONFIG_BUILD_FLAT=y
+# CONFIG_APP_BINARY_SEPARATION is not set
 # CONFIG_BUILD_2PASS is not set
+CONFIG_BOARD_BUILD_DATE="200204"
 
 #
 # Binary Output Formats
@@ -31,7 +33,6 @@ CONFIG_INTELHEX_BINARY=y
 CONFIG_RAW_BINARY=y
 # CONFIG_UBOOT_UIMAGE is not set
 # CONFIG_DOWNLOAD_IMAGE is not set
-# CONFIG_SMARTFS_IMAGE is not set
 
 #
 # Customize Header Files
@@ -50,25 +51,38 @@ CONFIG_DEBUG_NOOPT=y
 # Chip Selection
 #
 CONFIG_ARCH_ARM=y
+# CONFIG_ARCH_XTENSA is not set
 CONFIG_ARCH="arm"
 # CONFIG_ARCH_CHIP_LM is not set
 # CONFIG_ARCH_CHIP_S5J is not set
 # CONFIG_ARCH_CHIP_BCM4390X is not set
+# CONFIG_ARCH_CHIP_STM32 is not set
+# CONFIG_ARCH_CHIP_IMXRT is not set
+# CONFIG_ARCH_CHIP_STM32L4 is not set
+# CONFIG_ARCH_CHIP_AMEBAD is not set
 CONFIG_ARCH_CHIP_STM32H745=y
 CONFIG_ARCH_CHIP="stm32h745"
 
 #
 # ARM Options
 #
-# CONFIG_ARCH_CORTEXM7 is not set
+# CONFIG_ARCH_CORTEXM3 is not set
+# CONFIG_ARCH_CORTEXM4 is not set
 CONFIG_ARCH_CORTEXM7=y
+# CONFIG_ARCH_CORTEXM33 is not set
 # CONFIG_ARCH_CORTEXR4 is not set
+CONFIG_ARCH_ARMV7M_FAMILY=y
+# CONFIG_ARCH_ARMV8M_FAMILY is not set
+# CONFIG_ARCH_ARMV7R_FAMILY is not set
 CONFIG_ARCH_FAMILY="armv7-m"
-CONFIG_ARMV7M_USEBASEPRI=y
 CONFIG_ARCH_HAVE_CMNVECTOR=y
 # CONFIG_ARM_CMNVECTOR is not set
 CONFIG_ARCH_HAVE_FPU=y
+# CONFIG_ARCH_HAVE_DPFPU is not set
+CONFIG_ARCH_HAVE_LAZYFPU=y
 CONFIG_ARCH_FPU=y
+# CONFIG_ARM_HAVE_MPU_UNIFIED is not set
+# CONFIG_ARM_MPU is not set
 # CONFIG_ARMV7M_MPU is not set
 # CONFIG_DEBUG_HARDFAULT is not set
 
@@ -76,79 +90,59 @@ CONFIG_ARCH_FPU=y
 # Exception stack options
 #
 # CONFIG_ARCH_HAVE_DABORTSTACK is not set
+CONFIG_STACK_OVERFLOW_PROTECTION_DISABLE=y
 CONFIG_SYSTEM_REBOOT_REASON=y
 
 #
 # ARMV7M Configuration Options
 #
+# CONFIG_ARMV7M_HAVE_ICACHE is not set
+# CONFIG_ARMV7M_HAVE_DCACHE is not set
+CONFIG_ARMV7M_LAZYFPU=y
+CONFIG_ARMV7M_USEBASEPRI=y
+# CONFIG_ARMV7M_HAVE_ITCM is not set
+# CONFIG_ARMV7M_HAVE_DTCM is not set
 # CONFIG_ARMV7M_TOOLCHAIN_BUILDROOT is not set
 # CONFIG_ARMV7M_TOOLCHAIN_CODEREDL is not set
 # CONFIG_ARMV7M_TOOLCHAIN_CODESOURCERYL is not set
 CONFIG_ARMV7M_TOOLCHAIN_GNU_EABIL=y
-CONFIG_ARMV7M_LAZYFPU=y
-# CONFIG_ARMV7M_STACKCHECK is not set
+# CONFIG_ARMV7M_TOOLCHAIN_CLANGL is not set
+# CONFIG_ARMV7M_HAVE_STACKCHECK is not set
 # CONFIG_ARMV7M_ITMSYSLOG is not set
 
 #
-# STM32 Configuration Options
+# STM32H745 Configuration Options
 #
 CONFIG_ARCH_CHIP_STM32H745ZI=y
 CONFIG_STM32H745_STM32H745ZI=y
+# CONFIG_STM32H745_IO_CONFIG_A is not set
+# CONFIG_STM32H745_IO_CONFIG_B is not set
+# CONFIG_STM32H745_IO_CONFIG_C is not set
+# CONFIG_STM32H745_IO_CONFIG_D is not set
+# CONFIG_STM32H745_IO_CONFIG_E is not set
+# CONFIG_STM32H745_IO_CONFIG_F is not set
+# CONFIG_STM32H745_IO_CONFIG_G is not set
+# CONFIG_STM32H745_IO_CONFIG_H is not set
 
 #
-# STM32 Peripheral Support
-#
-CONFIG_STM32_HAVE_USART2=y
-CONFIG_STM32_HAVE_USART6=y
-CONFIG_STM32_HAVE_TIM7=y
-CONFIG_STM32_PWR=y
-CONFIG_STM32_USART1=y
-CONFIG_STM32_WWDG1=y
-
-#
-# Alternate Pin Mapping
-#
-# CONFIG_STM32_FLASH_PREFETCH is not set
-# CONFIG_STM32_JTAG_DISABLE is not set
-# CONFIG_STM32_JTAG_FULL_ENABLE is not set
-# CONFIG_STM32_JTAG_NOJNTRST_ENABLE is not set
-CONFIG_STM32_JTAG_SW_ENABLE=y
-# CONFIG_STM32_DISABLE_IDLE_SLEEP_DURING_DEBUG is not set
-# CONFIG_STM32_FORCEPOWER is not set
-# CONFIG_ARCH_BOARD_STM32_CUSTOM_CLOCKCONFIG is not set
-# CONFIG_STM32_CCMEXCLUDE is not set
-# CONFIG_STM32_FSMC_SRAM is not set
-CONFIG_STM32_USART=y
-
-#
-# U[S]ART Configuration
-#
-# CONFIG_USART1_RS485 is not set
-# CONFIG_SERIAL_DISABLE_REORDERING is not set
-# CONFIG_STM32_FLOWCONTROL_BROKEN is not set
-# CONFIG_STM32_USART_SINGLEWIRE is not set
-
-#
-# SPI Configuration
-#
-# CONFIG_STM32_SPI_INTERRUPTS is not set
-# CONFIG_STM32_SPI_DMA is not set
-
-#
-# USB FS Host Configuration
+# STM32H745 Peripherals
 #
 
 #
-# USB HS Host Configuration
-#
-
-#
-# USB Host Debug Configuration
-#
-
-#
-# USB Device Configuration
+# STM32H745 Peripheral Support
 #
+CONFIG_STM32H745_HAVE_TIM7=y
+CONFIG_STM32H745_HAVE_USART2=y
+CONFIG_STM32H745_HAVE_USART3=y
+CONFIG_STM32H745_HAVE_USART6=y
+CONFIG_STM32H745_HAVE_WWDG1=y
+CONFIG_STM32H745_HAVE_HSEM=y
+# CONFIG_STM32H745_TIM7 is not set
+CONFIG_STM32H745_USART2=y
+CONFIG_STM32H745_USART3=y
+CONFIG_STM32H745_USART6=y
+# CONFIG_STM32H745_WWDG1 is not set
+# CONFIG_STM32H745_HSEM is not set
 
 #
 # Architecture Options
@@ -167,17 +161,18 @@ CONFIG_ARCH_HAVE_MPU=y
 # CONFIG_ARCH_NAND_HWECC is not set
 # CONFIG_ARCH_HAVE_EXTCLK is not set
 # CONFIG_ARCH_HAVE_POWEROFF is not set
-# CONFIG_ARCH_HAVE_RESET is not set
+CONFIG_ARCH_HAVE_RESET=y
 # CONFIG_ARCH_USE_MPU is not set
 CONFIG_ARCH_IRQPRIO=y
 CONFIG_ARCH_STACKDUMP=y
 # CONFIG_ENDIAN_BIG is not set
 # CONFIG_ARCH_IDLE_CUSTOM is not set
-# CONFIG_ARCH_HAVE_RAMFUNCS is not set
-CONFIG_ARCH_HAVE_RAMVECTORS=y
-# CONFIG_ARCH_RAMVECTORS is not set
 CONFIG_ARCH_HAVE_RAMFUNCS=y
 CONFIG_ARCH_RAMFUNCS=y
+CONFIG_ARCH_HAVE_RAMVECTORS=y
+# CONFIG_ARCH_RAMVECTORS is not set
+# CONFIG_SUPPRESS_INTERRUPTS is not set
+# CONFIG_SUPPRESS_TIMER_INTS is not set
 
 #
 # Board Settings
@@ -190,6 +185,7 @@ CONFIG_BOARD_LOOPSPERMSEC=16717
 #
 CONFIG_ARCH_HAVE_INTERRUPTSTACK=y
 CONFIG_ARCH_INTERRUPTSTACK=0
+CONFIG_ARCH_HAVE_NESTED_INTERRUPT=y
 CONFIG_ARCH_HAVE_HIPRI_INTERRUPT=y
 # CONFIG_ARCH_HIPRI_INTERRUPT is not set
 
@@ -214,6 +210,8 @@ CONFIG_RAM_KREGIONx_SIZE="524288"
 # Board Selection
 #
 CONFIG_ARCH_BOARD_STM32H745ZI_NUCLEO=y
+# CONFIG_ARCH_BOARD_ARTIK05X_FAMILY is not set
+# CONFIG_ARCH_BOARD_ESP32_FAMILY is not set
 CONFIG_ARCH_BOARD="stm32h745zi-nucleo"
 
 #
@@ -225,26 +223,47 @@ CONFIG_ARCH_HAVE_BUTTONS=y
 CONFIG_ARCH_BUTTONS=y
 CONFIG_ARCH_HAVE_IRQBUTTONS=y
 # CONFIG_ARCH_IRQBUTTONS is not set
+# CONFIG_ARCH_HAVE_RAM_KERNEL_TEXT is not set
 # CONFIG_BOARD_CRASHDUMP is not set
+CONFIG_BOARD_ASSERT_SYSTEM_HALT=y
 CONFIG_LIB_BOARDCTL=y
+# CONFIG_BOARDCTL_RESET is not set
+# CONFIG_BOARDCTL_UNIQUEID is not set
 # CONFIG_BOARD_FOTA_SUPPORT is not set
 
 #
 # Board-Specific Options
 #
-#
 CONFIG_FLASH_START_ADDR=0x80C0000
 CONFIG_FLASH_SIZE=262144
+CONFIG_SHARED_MEMORY=y
+# CONFIG_SHARED_MEMORY_AXI_RAM is not set
+# CONFIG_SHARED_MEMORY_SRAM1 is not set
+# CONFIG_SHARED_MEMORY_SRAM2 is not set
+# CONFIG_SHARED_MEMORY_SRAM3 is not set
+CONFIG_SHARED_MEMORY_SRAM4=y
+CONFIG_ARCH_BOARD_HAVE_FLASH=y
 
+#
+# Board-Partition Options
+#
 CONFIG_FLASH_PARTITION=y
 CONFIG_FLASH_MINOR=0
 CONFIG_FLASH_PART_SIZE="256,"
 CONFIG_FLASH_PART_TYPE="smartfs,"
 CONFIG_FLASH_PART_NAME="userfs,"
 # CONFIG_ARCH_BOARD_HAVE_SECOND_FLASH is not set
-# CONFIG_AUTOMOUNT=y
-# CONFIG_AUTOMOUNT_USERFS=y
-# CONFIG_STM32H745ZI_NUCLEO_FLASH is not set
+# CONFIG_AUTOMOUNT is not set
+
+#
+# SE Selection
+#
+# CONFIG_SE is not set
+
+#
+# Crypto Module
+#
+# CONFIG_CRYPTO is not set
 
 #
 # Kernel Features
@@ -259,7 +278,6 @@ CONFIG_DISABLE_OS_API=y
 #
 # Clocks and Timers
 #
-# CONFIG_ARCH_HAVE_TICKLESS is not set
 CONFIG_USEC_PER_TICK=10000
 CONFIG_SYSTEM_TIME64=y
 # CONFIG_CLOCK_MONOTONIC is not set
@@ -284,6 +302,7 @@ CONFIG_SCHED_CHILD_STATUS=y
 CONFIG_PREALLOC_CHILDSTATUS=0
 # CONFIG_DEBUG_CHILDSTATUS is not set
 CONFIG_SCHED_WAITPID=y
+# CONFIG_SIGKILL_HANDLER is not set
 
 #
 # Pthread Options
@@ -353,45 +372,58 @@ CONFIG_USERMAIN_STACKSIZE=1024
 # CONFIG_MPU_STACKGAURD is not set
 CONFIG_PTHREAD_STACK_MIN=256
 CONFIG_PTHREAD_STACK_DEFAULT=1024
+# CONFIG_LOG_DUMP is not set
 
 #
 # Device Drivers
 #
 # CONFIG_DISABLE_POLL is not set
 CONFIG_DEV_NULL=y
+# CONFIG_DEV_URANDOM is not set
 CONFIG_DEV_ZERO=y
 # CONFIG_DRVR_READAHEAD is not set
 # CONFIG_CAN is not set
 # CONFIG_ARCH_HAVE_PWM_PULSECOUNT is not set
 # CONFIG_ARCH_HAVE_PWM_MULTICHAN is not set
 # CONFIG_PWM is not set
-# CONFIG_ARCH_HAVE_I2CRESET is not set
+CONFIG_ARCH_HAVE_I2CRESET=y
 # CONFIG_I2C is not set
 # CONFIG_SPI is not set
-# CONFIG_SPI_OWNBUS is not set
-# CONFIG_SPI_EXCHANGE=y
-# CONFIG_SPI_CMDDATA=y
-# CONFIG_SPI_BITBANG is not set
 CONFIG_GPIO=y
 # CONFIG_I2S is not set
 # CONFIG_AUDIO_DEVICES is not set
+# CONFIG_DRIVERS_VIDEO is not set
+
+#
+# LCD Driver Support
+#
+# CONFIG_LCD is not set
 CONFIG_BCH=y
 # CONFIG_RTC is not set
 CONFIG_WATCHDOG=y
 CONFIG_WATCHDOG_DEVPATH="/dev/watchdog0"
+# CONFIG_WATCHDOG_FOR_IRQ is not set
 # CONFIG_TIMER is not set
+CONFIG_MMINFO=y
+# CONFIG_PRODCONFIG is not set
 # CONFIG_ANALOG is not set
+# CONFIG_DRIVERS_OS_API_TEST is not set
 CONFIG_PIPES=y
 CONFIG_DEV_PIPE_SIZE=1024
 # CONFIG_POWER is not set
 CONFIG_SERIAL=y
-CONFIG_SERIAL_REMOVABLE=y
+# CONFIG_DEV_LOWCONSOLE is not set
+# CONFIG_SERIAL_REMOVABLE is not set
+CONFIG_SERIAL_CONSOLE=y
 # CONFIG_16550_UART is not set
 # CONFIG_ARCH_HAVE_UART is not set
 # CONFIG_ARCH_HAVE_UART0 is not set
 # CONFIG_ARCH_HAVE_UART1 is not set
+# CONFIG_ARCH_HAVE_UART2 is not set
+# CONFIG_ARCH_HAVE_UART3 is not set
 # CONFIG_ARCH_HAVE_UART4 is not set
 # CONFIG_ARCH_HAVE_UART5 is not set
+# CONFIG_ARCH_HAVE_UART6 is not set
 # CONFIG_ARCH_HAVE_UART7 is not set
 # CONFIG_ARCH_HAVE_UART8 is not set
 # CONFIG_ARCH_HAVE_SCI0 is not set
@@ -410,7 +442,10 @@ CONFIG_ARCH_HAVE_USART6=y
 #
 # USART Configuration
 #
+CONFIG_USART2_ISUART=y
 CONFIG_USART3_ISUART=y
+CONFIG_USART6_ISUART=y
+# CONFIG_OTHER_UART_SERIALDRIVER is not set
 CONFIG_MCU_SERIAL=y
 CONFIG_STANDARD_SERIAL=y
 CONFIG_SERIAL_NPOLLWAITERS=2
@@ -419,9 +454,31 @@ CONFIG_SERIAL_NPOLLWAITERS=2
 # CONFIG_SERIAL_TIOCSERGSTRUCT is not set
 CONFIG_ARCH_HAVE_SERIAL_TERMIOS=y
 # CONFIG_SERIAL_TERMIOS is not set
-CONFIG_USART1_SERIAL_CONSOLE=y
+# CONFIG_USART2_SERIAL_CONSOLE is not set
+CONFIG_USART3_SERIAL_CONSOLE=y
+# CONFIG_USART6_SERIAL_CONSOLE is not set
 # CONFIG_OTHER_SERIAL_CONSOLE is not set
 # CONFIG_NO_SERIAL_CONSOLE is not set
+# CONFIG_UART_SERIALDRIVER is not set
+# CONFIG_UART0_SERIALDRIVER is not set
+# CONFIG_UART1_SERIALDRIVER is not set
+# CONFIG_UART2_SERIALDRIVER is not set
+# CONFIG_UART3_SERIALDRIVER is not set
+# CONFIG_UART4_SERIALDRIVER is not set
+# CONFIG_UART5_SERIALDRIVER is not set
+# CONFIG_UART6_SERIALDRIVER is not set
+# CONFIG_UART7_SERIALDRIVER is not set
+# CONFIG_UART8_SERIALDRIVER is not set
+# CONFIG_LPUART_SERIALDRIVER is not set
+# CONFIG_LPUART0_SERIALDRIVER is not set
+# CONFIG_LPUART1_SERIALDRIVER is not set
+# CONFIG_LPUART2_SERIALDRIVER is not set
+# CONFIG_LPUART3_SERIALDRIVER is not set
+# CONFIG_LPUART4_SERIALDRIVER is not set
+# CONFIG_LPUART5_SERIALDRIVER is not set
+# CONFIG_LPUART6_SERIALDRIVER is not set
+# CONFIG_LPUART7_SERIALDRIVER is not set
+# CONFIG_LPUART8_SERIALDRIVER is not set
 
 #
 # USART2 Configuration
@@ -458,63 +515,30 @@ CONFIG_USART6_PARITY=0
 CONFIG_USART6_2STOP=0
 # CONFIG_USART6_IFLOWCONTROL is not set
 # CONFIG_USART6_OFLOWCONTROL is not set
-
-
-#
-# USB Device Controller Driver Options
-#
-# CONFIG_USBDEV_ISOCHRONOUS is not set
-# CONFIG_USBDEV_DUALSPEED is not set
-# CONFIG_USBDEV_SELFPOWERED is not set
-# CONFIG_USBDEV_BUSPOWERED is not set
-# CONFIG_USBDEV_MAXPOWER is not set
-# CONFIG_USBDEV_DMA is not set
-# CONFIG_ARCH_USBDEV_STALLQUEUE is not set
-# CONFIG_USBDEV_TRACE is not set
-
-#
-# USB Device Class Driver Options
-#
-# CONFIG_USBDEV_COMPOSITE is not set
-# CONFIG_PL2303 is not set
-# CONFIG_CDCACM is not set
-# CONFIG_CDCACM_CONSOLE is not set
-# CONFIG_CDCACM_EP0MAXPACKET is not set
-# CONFIG_CDCACM_EPINTIN is not set
-# CONFIG_CDCACM_EPINTIN_FSSIZE is not set
-# CONFIG_CDCACM_EPINTIN_HSSIZE is not set
-# CONFIG_CDCACM_EPBULKOUT is not set
-# CONFIG_CDCACM_EPBULKOUT_FSSIZE is not set
-# CONFIG_CDCACM_EPBULKOUT_HSSIZE is not set
-# CONFIG_CDCACM_EPBULKIN is not set
-# CONFIG_CDCACM_EPBULKIN_FSSIZE is not set
-# CONFIG_CDCACM_EPBULKIN_HSSIZE is not set
-# CONFIG_CDCACM_NWRREQS is not set
-# CONFIG_CDCACM_NRDREQS is not set
-# CONFIG_CDCACM_BULKIN_REQLEN is not set
-# CONFIG_CDCACM_RXBUFSIZE is not set
-# CONFIG_CDCACM_TXBUFSIZE is not set
-# CONFIG_CDCACM_VENDORID is not set
-# CONFIG_CDCACM_PRODUCTID is not set
-# CONFIG_CDCACM_VENDORSTR is not set
-# CONFIG_CDCACM_PRODUCTSTR is not set
-# CONFIG_USBMSC is not set
+# CONFIG_SENSOR is not set
+# CONFIG_USBDEV is not set
+# CONFIG_USBHOST is not set
 # CONFIG_FOTA_DRIVER is not set
 
 #
 # System Logging
 #
 # CONFIG_RAMLOG is not set
+# CONFIG_SYSLOG_CONSOLE is not set
 
 #
 # T-trace
 #
 # CONFIG_TTRACE is not set
+# CONFIG_IOTDEV is not set
 
 #
 # Wireless Device Options
 #
 # CONFIG_DRIVERS_WIRELESS is not set
+# CONFIG_DRIVERS_BLUETOOTH is not set
+# CONFIG_OTP is not set
+# CONFIG_SECURITY_LINK_DRV is not set
 
 #
 # Networking Support
@@ -543,52 +567,65 @@ CONFIG_FS_WRITABLE=y
 CONFIG_FS_MQUEUE_MPATH="/var/mqueue"
 # CONFIG_FS_SMARTFS is not set
 CONFIG_FS_PROCFS=y
+# CONFIG_FS_AUTOMOUNT_PROCFS is not set
+
+#
+# Exclude individual procfs entries
+#
+# CONFIG_FS_PROCFS_EXCLUDE_PROCESS is not set
+# CONFIG_FS_PROCFS_EXCLUDE_UPTIME is not set
+# CONFIG_FS_PROCFS_EXCLUDE_VERSION is not set
+# CONFIG_FS_PROCFS_EXCLUDE_IRQS is not set
+# CONFIG_FS_PROCFS_EXCLUDE_MTD is not set
+# CONFIG_FS_PROCFS_EXCLUDE_PARTITIONS is not set
 # CONFIG_FS_ROMFS is not set
 # CONFIG_FS_TMPFS is not set
-# CONFIG_FS_SMARTFS=y
 
-# CONFIG_SMARTFS_ERASEDSTATE=0xff
-# CONFIG_SMARTFS_MAXNAMLEN=32
-# CONFIG_SMARTFS_MULTI_ROOT_DIRS is not set
-# CONFIG_SMARTFS_ALIGNED_ACCESS=y
+#
+# Block Driver Configurations
+#
+# CONFIG_RAMDISK is not set
 
+#
+# MTD Configuration
+#
 CONFIG_MTD=y
 CONFIG_MTD_PARTITION=y
 CONFIG_MTD_PARTITION_NAMES=y
 # CONFIG_MTD_PROGMEM is not set
 CONFIG_MTD_FTL=y
 
-# CONFIG_MTD_SMART=y
-
 #
-# SMART Device options
+# MTD_FTL Configurations
 #
-# CONFIG_MTD_SMART_SECTOR_SIZE=1024
-# CONFIG_MTD_SMART_WEAR_LEVEL=y
+# CONFIG_MTD_CONFIG is not set
+# CONFIG_MTD_BYTE_WRITE is not set
 
 #
-# Block Driver Configurations
+# MTD Device Drivers
 #
-# CONFIG_RAMDISK is not set
-
-#
-# MTD Configuration
-#
-# CONFIG_MTD is not set
+# CONFIG_MTD_M25P is not set
+# CONFIG_RAMMTD is not set
+# CONFIG_MTD_SMART is not set
+# CONFIG_MTD_W25 is not set
+# CONFIG_MTD_JEDEC is not set
 
 #
 # System Logging
 #
-# CONFIG_SYSLOG=y
+# CONFIG_SYSLOG is not set
 # CONFIG_SYSLOG_TIMESTAMP is not set
-# CONFIG_SYSLOG_CHAR=y
-# CONFIG_SYSLOG_DEVPATH="/dev/syslog"
 
 #
 # Database
 #
 # CONFIG_ARASTORAGE is not set
 
+#
+# AraUI Framework
+#
+# CONFIG_UI is not set
+
 #
 # Memory Management
 #
@@ -598,12 +635,7 @@ CONFIG_MM_KERNEL_HEAP=y
 CONFIG_KMM_REGIONS=1
 CONFIG_KMM_NHEAPS=1
 # CONFIG_GRAN is not set
-CONFIG_SHARED_MEMORY=y
-#CONFIG_SHARED_MEMORY_AXI_RAM is not set
-#CONFIG_SHARED_MEMORY_SRAM1 is not set
-#CONFIG_SHARED_MEMORY_SRAM2 is not set
-#CONFIG_SHARED_MEMORY_SRAM3 is not set
-CONFIG_SHARED_MEMORY_SRAM4=y
+CONFIG_MM_ASSERT_ON_FAIL=y
 
 #
 # Work Queue Support
@@ -619,6 +651,7 @@ CONFIG_SHARED_MEMORY_SRAM4=y
 #
 # Power Management
 #
+# CONFIG_PM is not set
 
 #
 # Debug Options
@@ -626,35 +659,40 @@ CONFIG_SHARED_MEMORY_SRAM4=y
 CONFIG_DEBUG=y
 CONFIG_DEBUG_ERROR=y
 # CONFIG_DEBUG_WARN is not set
-# CONFIG_DEBUG_VERBOSE=y
-# CONFIG_DEBUG_FS=y
-# CONFIG_DEBUG_FS_ERROR=y
-# CONFIG_DEBUG_FS_WARN=y
-# CONFIG_DEBUG_FS_INFO=y
+# CONFIG_DEBUG_VERBOSE is not set
 
 #
 # Subsystem Debug Options
 #
-# CONFIG_DEBUG_LIB is not set
 # CONFIG_DEBUG_FS is not set
-# CONFIG_DEBUG_IOTBUS is not set
+# CONFIG_DEBUG_LIB is not set
 # CONFIG_DEBUG_MM is not set
+# CONFIG_DEBUG_BLE is not set
+# CONFIG_DEBUG_PM is not set
 # CONFIG_DEBUG_SCHED is not set
 # CONFIG_DEBUG_TASH is not set
 
+#
+# Framework Debug Options
+#
+# CONFIG_DEBUG_IOTBUS is not set
+# CONFIG_DEBUG_REBOOT_REASON is not set
+
 #
 # OS Function Debug Options
 #
 CONFIG_ARCH_HAVE_HEAPCHECK=y
 # CONFIG_DEBUG_HEAP is not set
 CONFIG_DEBUG_MM_HEAPINFO=y
+# CONFIG_DEBUG_CHECK_FRAGMENTATION is not set
 # CONFIG_DEBUG_IRQ is not set
 
 #
 # Driver Debug Options
 #
+# CONFIG_DEBUG_ANALOG is not set
 # CONFIG_DEBUG_I2S is not set
-# CONFIG_DEBUG_SPI is not set
+# CONFIG_DEBUG_WATCHDOG is not set
 
 #
 # System Debug Options
@@ -691,6 +729,7 @@ CONFIG_NUNGET_CHARS=2
 CONFIG_LIB_HOMEDIR="/"
 # CONFIG_LIBM is not set
 # CONFIG_NOPRINTF_FIELDWIDTH is not set
+CONFIG_LIBC_LONG_LONG=y
 CONFIG_LIBC_SCANSET=y
 # CONFIG_NOPRINTF_LONGLONG_TO_ASCII is not set
 # CONFIG_LIBC_IOCTL_VARIADIC is not set
@@ -709,11 +748,15 @@ CONFIG_LIBC_MAX_TMPFILE=32
 CONFIG_ARCH_LOWPUTC=y
 # CONFIG_LIBC_LOCALTIME is not set
 CONFIG_LIB_SENDFILE_BUFSIZE=512
+# CONFIG_LIBC_ARCH_ELF is not set
 # CONFIG_ARCH_OPTIMIZED_FUNCTIONS is not set
+# CONFIG_LIB_ENVPATH is not set
+# CONFIG_LIB_HASHMAP is not set
 
 #
-# Non-standard Library Support
+# Program Execution Options
 #
+# CONFIG_LIBC_SYMTAB is not set
 
 #
 # Basic CXX Support
@@ -736,8 +779,24 @@ CONFIG_LIB_SENDFILE_BUFSIZE=512
 # CONFIG_ENABLE_IOTIVITY is not set
 # CONFIG_NETUTILS_JSON is not set
 # CONFIG_LIBTUV is not set
+# CONFIG_WIFI_MBOX is not set
 # CONFIG_STRESS_TOOL is not set
 # CONFIG_VOICE_SOFTWARE_EPD is not set
+# CONFIG_EXTERNAL_VEC is not set
+# CONFIG_LIB_LZMA is not set
+# CONFIG_LIB_MINIZ is not set
+# CONFIG_NANOPB is not set
+# CONFIG_LIBSODIUM is not set
+
+#
+# Binary Loader
+#
+# CONFIG_BINFMT_ENABLE is not set
+
+#
+# Compression
+#
+# CONFIG_COMPRESSION is not set
 
 #
 # Application Configuration
@@ -754,29 +813,77 @@ CONFIG_BUILTIN_APPS=y
 #
 # Examples
 #
-# CONFIG_EXAMPLES_AVS_TEST is not set
 # CONFIG_EXAMPLES_AWS is not set
+
+#
+# Board Specific Demos
+#
 # CONFIG_EXAMPLES_CURLTEST is not set
+
+#
+# dTLS
+#
 # CONFIG_EXAMPLES_EEPROM_TEST is not set
 # CONFIG_EXAMPLES_EVENTLOOP is not set
 # CONFIG_EXAMPLES_FOTA_SAMPLE is not set
-# CONFIG_FILESYSTEM_HELPER_ENABLE is not set
+# CONFIG_FILESYSTEM_TEST is not set
+
+#
+# gRPC
+#
+# CONFIG_EXAMPLES_HEAVY_SIGNAL_MESSAGE_TEST is not set
 CONFIG_EXAMPLES_HELLO=y
-# CONFIG_EXAMPLES_HELLOXX is not set
 # CONFIG_EXAMPLES_IOTBUS_TEST is not set
 # CONFIG_EXAMPLES_IOTJS_STARTUP is not set
 # CONFIG_EXAMPLES_KERNEL_SAMPLE is not set
+
+#
+# Libcoap
+#
 # CONFIG_EXAMPLES_LIBTUV is not set
-# CONFIG_EXAMPLES_NETTEST is not set
+# CONFIG_EXAMPLES_LWNL_SAMPLE is not set
+# CONFIG_EXAMPLES_MEMORY_FRAGMENTATION_TEST is not set
+
+#
+# Performance
+#
+# CONFIG_EXAMPLES_HEAP_PERFORMANCE_TEST is not set
+# CONFIG_EXAMPLES_SYSCALL_PERFORMANCE is not set
+
+#
+# Protocol Buffer
+#
+# CONFIG_EXAMPLES_REBOOT_REASON is not set
+# CONFIG_EXAMPLES_RSSI_REPORT is not set
+
+#
+# Security Test
+#
+# CONFIG_EXAMPLES_SECURITY_API_TEST is not set
+# CONFIG_EXAMPLES_SECLINK_TOOL is not set
 # CONFIG_EXAMPLES_SELECT_TEST is not set
 # CONFIG_EXAMPLES_SENSORBOARD is not set
 # CONFIG_EXAMPLES_SETJMP_TEST is not set
+# CONFIG_EXAMPLES_SIMPLE_FILE_TRANSFER is not set
+
+#
+# SmartFs Test Applications
+#
 # CONFIG_EXAMPLES_SMART is not set
 # CONFIG_EXAMPLES_SMART_TEST is not set
-# CONFIG_EXAMPLES_SPEECH_DETECTOR_TEST is not set
+# CONFIG_EXAMPLES_SMARTFS_POWERCUT is not set
 # CONFIG_EXAMPLES_ST_THINGS is not set
 # CONFIG_EXAMPLES_TESTCASE is not set
 
+#
+# TLS
+#
+
+#
+# Wifi Manager
+#
+# CONFIG_EXAMPLES_TAHI is not set
+
 #
 # Platform-specific Support
 #
@@ -787,7 +894,6 @@ CONFIG_EXAMPLES_HELLO=y
 #
 CONFIG_TASH=y
 CONFIG_TASH_MAX_STORE_COMMANDS=10
-CONFIG_TASH_REBOOT=y
 # CONFIG_TASH_USLEEP is not set
 # CONFIG_TASH_COMMAND_INTERFACE is not set
 CONFIG_TASH_CMDTASK_STACKSIZE=4096
@@ -799,17 +905,18 @@ CONFIG_TASH_CMDTASK_PRIORITY=100
 #
 # CONFIG_SYSTEM_CLE is not set
 # CONFIG_SYSTEM_CUTERM is not set
+# CONFIG_SYSTEM_FLASH_READ is not set
 # CONFIG_SYSTEM_FOTA_HAL is not set
 # CONFIG_SYSTEM_INIFILE is not set
 CONFIG_SYSTEM_PREAPP_INIT=y
 CONFIG_SYSTEM_PREAPP_STACKSIZE=2048
-# CONFIG_SYSTEM_INSTALL is not set
 # CONFIG_SYSTEM_RAMTEST is not set
 CONFIG_SYSTEM_READLINE=y
 CONFIG_READLINE_ECHO=y
 CONFIG_SYSTEM_INFORMATION=y
 CONFIG_SYSTEM_CMDS=y
 CONFIG_FS_CMDS=y
+CONFIG_FSCMD_BUFFER_LEN=256
 CONFIG_ENABLE_DATE=y
 CONFIG_ENABLE_ENV_GET=y
 CONFIG_ENABLE_ENV_SET=y
@@ -817,7 +924,6 @@ CONFIG_ENABLE_ENV_UNSET=y
 CONFIG_ENABLE_FREE=y
 CONFIG_ENABLE_HEAPINFO=y
 # CONFIG_HEAPINFO_USER_GROUP is not set
-# CONFIG_ENABLE_IRQINFO is not set
 CONFIG_ENABLE_KILL=y
 CONFIG_ENABLE_KILLALL=y
 CONFIG_ENABLE_PS=y
@@ -825,6 +931,26 @@ CONFIG_ENABLE_PS=y
 CONFIG_ENABLE_UPTIME=y
 # CONFIG_SYSTEM_VI is not set
 
+#
+# Loadable apps Configuration
+#
+CONFIG_APP1_INFO=y
+CONFIG_APP1_BIN_NAME="app1"
+CONFIG_APP1_BIN_TYPE="ELF"
+CONFIG_APP1_BIN_VER=190412
+CONFIG_APP1_BIN_DYN_RAMSIZE=512000
+CONFIG_APP1_BIN_LOADING_PRIORITY="HIGH"
+CONFIG_APP1_MAIN_STACKSIZE=4096
+CONFIG_APP1_MAIN_PRIORITY=220
+CONFIG_APP2_INFO=y
+CONFIG_APP2_BIN_NAME="app2"
+CONFIG_APP2_BIN_TYPE="ELF"
+CONFIG_APP2_BIN_VER=190412
+CONFIG_APP2_BIN_DYN_RAMSIZE=512000
+CONFIG_APP2_BIN_LOADING_PRIORITY="HIGH"
+CONFIG_APP2_MAIN_STACKSIZE=8192
+CONFIG_APP2_MAIN_PRIORITY=180
+
 #
 # Runtime Environment
 #
@@ -834,6 +960,15 @@ CONFIG_ENABLE_UPTIME=y
 # Device Management
 #
 
+#
+# Binary manager
+#
+# CONFIG_BINARY_MANAGER is not set
+
+#
+# Task Monitor
+#
+
 #
 # Task manager
 #
@@ -844,6 +979,15 @@ CONFIG_ENABLE_UPTIME=y
 #
 # CONFIG_EVENTLOOP is not set
 
+#
+# Messaging Framework
+#
+# CONFIG_MESSAGING_IPC is not set
+
+#
+# Preference Support
+#
+
 #
 # Things Management
 #
@@ -853,5 +997,9 @@ CONFIG_ENABLE_UPTIME=y
 #
 CONFIG_IOTBUS=y
 CONFIG_IOTBUS_GPIO=y
-CONFIG_IOTBUS_SPI=y
 CONFIG_IOTBUS_UART=y
+
+#
+# Security Framework
+#
+# CONFIG_SECURITY_API is not set
diff --git a/os/arch/arm/src/stm32h745/Kconfig b/os/arch/arm/src/stm32h745/Kconfig
index 1f99f386be..f9da43418c 100644
--- a/os/arch/arm/src/stm32h745/Kconfig
+++ b/os/arch/arm/src/stm32h745/Kconfig
@@ -31,8 +31,10 @@ config STM32H745_STM32H745ZI
 	#
 	bool
 	default n
+	select ARCH_HAVE_RAMFUNCS
 	select STM32H745_HAVE_TIM7
 	select STM32H745_HAVE_USART2
+	select STM32H745_HAVE_USART3
 	select STM32H745_HAVE_USART6
 	select STM32H745_HAVE_WWDG1
 	select STM32H745_HAVE_HSEM
@@ -87,6 +89,10 @@ config STM32H745_HAVE_USART2
 	bool
 	default y
 
+config STM32H745_HAVE_USART3
+	bool
+	default y
+
 config STM32H745_HAVE_USART6
 	bool
 	default y
@@ -111,11 +117,22 @@ config STM32H745_USART2
 	bool "USART2"
 	default n
 	depends on STM32H745_HAVE_USART2
+	select ARCH_HAVE_USART2
+	select ARCH_HAVE_SERIAL_TERMIOS
+
+config STM32H745_USART3
+	bool "USART3"
+	default n
+	depends on STM32H745_HAVE_USART3
+	select ARCH_HAVE_USART3
+	select ARCH_HAVE_SERIAL_TERMIOS
 
 config STM32H745_USART6
 	bool "USART6"
 	default n
 	depends on STM32H745_HAVE_USART6
+	select ARCH_HAVE_USART6
+	select ARCH_HAVE_SERIAL_TERMIOS
 	
 config STM32H745_WWDG1
 	bool "WWDG1"
diff --git a/os/arch/arm/src/stm32h745/stm32h745_usart.c b/os/arch/arm/src/stm32h745/stm32h745_usart.c
index 2978788d85..8998227a9b 100644
--- a/os/arch/arm/src/stm32h745/stm32h745_usart.c
+++ b/os/arch/arm/src/stm32h745/stm32h745_usart.c
@@ -164,7 +164,7 @@ uint8_t up_getc(void)
 
   while(!LL_USART_IsActiveFlag_RXNE(USART3)){};
 
-  if(ch = LL_USART_ReceiveData8(USART3))
+  if(ch == LL_USART_ReceiveData8(USART3))
   {
     return ch;
   }
diff --git a/os/arch/arm/src/stm32h745/stm32h745_wwdg1.c b/os/arch/arm/src/stm32h745/stm32h745_wwdg1.c
index bc37623d73..cbabf068cc 100644
--- a/os/arch/arm/src/stm32h745/stm32h745_wwdg1.c
+++ b/os/arch/arm/src/stm32h745/stm32h745_wwdg1.c
@@ -78,7 +78,7 @@
 #include <system_stm32h745.h>
 
 
-#if defined(CONFIG_WATCHDOG) && defined(CONFIG_STM32_WWDG1)
+#if defined(CONFIG_WATCHDOG) && defined(CONFIG_STM32H745_WWDG1)
 #define CONFIG_STM32_WWDG_SETWINDOW (127)
 
 /****************************************************************************
diff --git a/os/board/stm32h745zi-nucleo/Kconfig b/os/board/stm32h745zi-nucleo/Kconfig
index 93167bf818..c22a9b9bbc 100644
--- a/os/board/stm32h745zi-nucleo/Kconfig
+++ b/os/board/stm32h745zi-nucleo/Kconfig
@@ -4,4 +4,42 @@
 #
 if ARCH_BOARD_STM32H745ZI_NUCLEO
 
+config FLASH_START_ADDR
+    hex
+    default 0x80C0000
+    help
+        A start address of flash (in hex).
+        This is fixed value, so user doesn't need to change it.
+
+config FLASH_SIZE
+    int
+    default 262144
+    help
+        A size of flash (in bytes).
+        This is fixed value, so user doesn't need to change it.
+
+config SHARED_MEMORY
+    bool
+    default y
+
+config SHARED_MEMORY_AXI_RAM
+    bool
+    default n
+
+config SHARED_MEMORY_SRAM1
+    bool
+    default n
+
+config SHARED_MEMORY_SRAM2
+    bool
+    default n
+
+config SHARED_MEMORY_SRAM3
+    bool
+    default n
+
+config SHARED_MEMORY_SRAM4
+    bool
+    default y
+
 endif # ARCH_BOARD_STM32H745ZI_NUCLEO
diff --git a/os/board/stm32h745zi-nucleo/src/stm32_boot.c b/os/board/stm32h745zi-nucleo/src/stm32_boot.c
index 57b49139cf..8b3b90fc6a 100644
--- a/os/board/stm32h745zi-nucleo/src/stm32_boot.c
+++ b/os/board/stm32h745zi-nucleo/src/stm32_boot.c
@@ -108,7 +108,7 @@ void board_initialize(void)
     stm32h745_shared_memory_init();
 #endif
 
-#if defined(CONFIG_WATCHDOG) && defined(CONFIG_STM32_WWDG1)
+#if defined(CONFIG_WATCHDOG) && defined(CONFIG_STM32H745_WWDG1)
     stm32h745_wwdginitialize(CONFIG_WATCHDOG_DEVPATH);
 #endif
 